# Progressive Web App (PWA) Implementation

This document explains the Progressive Web App (PWA) implementation in the Diploma Frontend application, following the Next.js App Router approach as described in the [Next.js PWA documentation](https://nextjs.org/docs/app/guides/progressive-web-apps).

## Overview

A Progressive Web App (PWA) is a web application that provides a native app-like experience to users. PWAs can work offline, can be installed on devices, and provide features like push notifications. This implementation ensures that the Diploma Frontend application functions as a full-featured PWA.

## Implementation Components

### 1. Web App Manifest

The `manifest.json` file in the `public` directory defines the application's metadata for PWA functionality:

- **Location**: `public/manifest.json`
- **Purpose**: Provides information about the application (name, icons, colors, etc.) for browsers and operating systems when installing the PWA.
- **Key Properties**:
  - `name` and `short_name`: Application names
  - `icons`: App icons in various sizes
  - `start_url`: Entry point for the application
  - `display`: How the app should be displayed (standalone)
  - `background_color` and `theme_color`: Color scheme
  - `screenshots`: Images for app stores and installation prompts

### 2. Service Worker

Service workers enable offline functionality and background processing:

- **Implementation**: Using `next-pwa` package configured in `next.config.ts`
- **Files**:
  - `public/sw.js`: Main service worker generated by next-pwa
  - `public/push-sw.js`: Custom service worker for push notifications
  - `public/workbox-*.js`: Workbox library files for service worker functionality
- **Features**:
  - Caching strategies for different types of assets
  - Offline support
  - Background sync
  - Push notifications

### 3. PWA Metadata in App Layout

The application's metadata is defined in the root layout:

- **Location**: `src/app/layout.tsx`
- **Purpose**: Provides metadata for browsers and search engines
- **Key Properties**:
  - `manifest`: Link to the manifest.json file
  - `themeColor`: Theme color for browser UI
  - `applicationName`: Name of the application
  - `viewport`: Configuration for responsive design
  - `icons`: Icons for various platforms
  - `appleWebApp`: iOS-specific settings
  - `formatDetection`: Controls browser behavior for phone numbers, etc.
  - `openGraph`: Metadata for social media sharing

### 4. Enhanced Service Worker Registration

Custom utilities for service worker registration and offline status:

- **Location**: `src/utils/registerSW.ts`
- **Purpose**: Provides enhanced service worker registration with better error handling and user experience
- **Key Features**:
  - Environment-specific registration (development vs. production)
  - Update notification when new content is available
  - Offline status detection
  - Event listeners for online/offline status changes

### 5. PWA Initializer Component

A React component that initializes PWA functionality:

- **Location**: `src/components/PWAInitializer.tsx`
- **Purpose**: Initializes PWA functionality and provides offline status indication
- **Key Features**:
  - Registers the service worker when the application loads
  - Displays a notification when the application is offline
  - Tracks online/offline status changes

## Testing PWA Functionality

To test the PWA functionality:

1. **Build and start the application**:
   ```bash
   npm run build
   npm run start
   ```

2. **Verify the manifest**:
   - Open Chrome DevTools (F12)
   - Go to the "Application" tab
   - Select "Manifest" in the left sidebar
   - Verify that all information is correctly displayed

3. **Verify the service worker**:
   - In the same "Application" tab
   - Select "Service Workers" in the left sidebar
   - Verify that the service worker is registered and active

4. **Test offline functionality**:
   - In the "Application" tab, check "Offline" under "Service Workers"
   - Refresh the page and verify that it still loads
   - Verify that the offline indicator appears

5. **Test installation**:
   - Look for the install icon in the browser's address bar
   - Click it to install the PWA
   - Verify that the application can be launched from the desktop/home screen

## Troubleshooting

If you encounter issues with the PWA functionality:

1. **Check browser support**: Ensure you're using a modern browser that supports PWA features (Chrome, Edge, Firefox, Safari).

2. **Verify HTTPS**: PWAs require HTTPS in production. Make sure your application is served over HTTPS.

3. **Clear cache and storage**:
   - In Chrome DevTools, go to "Application" > "Storage"
   - Click "Clear site data" to reset all storage and cache
   - Refresh the page and try again

4. **Check console for errors**: Look for any errors related to the service worker or manifest in the browser console.

## Resources

- [Next.js PWA Documentation](https://nextjs.org/docs/app/guides/progressive-web-apps)
- [Web App Manifest Specification](https://developer.mozilla.org/en-US/docs/Web/Manifest)
- [Service Worker API](https://developer.mozilla.org/en-US/docs/Web/API/Service_Worker_API)
- [Workbox Documentation](https://developers.google.com/web/tools/workbox)
- [next-pwa Package](https://github.com/shadowwalker/next-pwa)